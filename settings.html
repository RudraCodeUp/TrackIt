<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackIt | Settings</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body>
    <!-- App Wrapper -->
    <div class="app-container">
        <!-- Top Navigation Bar -->
        <nav class="top-navbar" id="top-navbar">
            <div class="navbar-left">
                <div class="logo">
                    <span class="material-icons-round logo-icon">track_changes</span>
                    <h1>TrackIt</h1>
                </div>
            </div>
            
            <div class="navbar-center">
                <div class="navbar-menu" id="navbar-menu">
                    <a href="index.html" class="menu-item">
                        <span class="material-icons-round">dashboard</span>
                        <span class="menu-text">Dashboard</span>
                    </a>
                    <a href="manage.html" class="menu-item">
                        <span class="material-icons-round">playlist_add_check</span>
                        <span class="menu-text">Manage</span>
                    </a>
                    <a href="analytics.html" class="menu-item">
                        <span class="material-icons-round">insights</span>
                        <span class="menu-text">Analytics</span>
                    </a>
                    <a href="settings.html" class="menu-item active">
                        <span class="material-icons-round">settings</span>
                        <span class="menu-text">Settings</span>
                    </a>
                    <a href="about.html" class="menu-item">
                        <span class="material-icons-round">help_outline</span>
                        <span class="menu-text">About</span>
                    </a>
                </div>
            </div>
            
            <div class="navbar-right">
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="theme-toggle">
                        <input type="checkbox" id="theme-toggle">
                        <div class="slider round">
                            <span class="material-icons-round sun-icon">light_mode</span>
                            <span class="material-icons-round moon-icon">dark_mode</span>
                        </div>
                    </label>
                </div>
                <button id="mobile-menu-toggle" class="mobile-menu-toggle">
                    <span class="material-icons-round">menu</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
          <div class="main-header">
            <div class="header-left">
              <h2>Settings</h2>
              <p class="subtitle">Customize your habit tracking experience</p>
            </div>
          </div>
          
          <!-- General Settings -->
          <div class="settings-section">
            <h3>General Settings</h3>
            
            <div class="setting-item">
              <div class="setting-label">
                <h4>Week Start Day</h4>
                <div class="setting-description">Choose which day your week starts on</div>
              </div>
              <select class="settings-select" id="week-start-day">
                <option value="1">Monday</option>
                <option value="0">Sunday</option>
              </select>
            </div>
            
            <div class="setting-item">
              <div class="setting-label">
                <h4>Daily Reminder</h4>
                <div class="setting-description">Set a time for daily habit reminders</div>
              </div>
              <div class="setting-control">
                <input type="time" class="time-picker" id="reminder-time" value="20:00">
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-label">
                <h4>Show Reminders</h4>
                <div class="setting-description">Enable or disable reminder notifications</div>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="show-reminders" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <!-- Categories Settings -->
          <div class="settings-section">
            <h3>Categories</h3>
            <div class="categories-list" id="categories-list">
              <!-- Categories will be dynamically added here -->
            </div>
            
            <div class="add-category-form">
              <input type="text" class="form-control" id="new-category-name" placeholder="New category name">
              <input type="color" class="color-picker" id="new-category-color" value="#4CAF50">
              <button class="btn btn-primary" id="add-category-btn">Add Category</button>
            </div>
          </div>
        </main>
    </div>

    <!-- Confirmation modal template -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <button class="btn-close" id="close-confirm">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon">
                    <span class="material-icons-round">warning</span>
                </div>
                <p id="modal-message">This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-text" id="modal-cancel">Cancel</button>
                <button class="btn btn-danger" id="modal-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Toast notification container -->
    <div class="toast-container" id="toast-container"></div>

    <script src="script.js"></script>
    <script>
        // Settings page specific script
        document.addEventListener('DOMContentLoaded', () => {
            // Setup settings navigation
            const navItems = document.querySelectorAll('.settings-nav-item');
            const sections = document.querySelectorAll('.settings-section');
            
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Show corresponding section
                    const sectionId = item.dataset.section;
                    sections.forEach(section => {
                        section.classList.toggle('active', section.id === sectionId);
                    });
                });
            });
            
            // Set initial active theme based on app data
            const themeInputs = document.querySelectorAll('input[name="theme"]');
            themeInputs.forEach(input => {
                if (input.value === appData.theme) {
                    input.checked = true;
                }
                
                input.addEventListener('change', () => {
                    if (input.checked) {
                        applyTheme(input.value);
                        appData.theme = input.value;
                        saveToLocalStorage();
                        
                        // Update theme toggle in sidebar
                        if (domElements.themeToggle) {
                            domElements.themeToggle.checked = input.value === 'dark';
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>